<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Chapter 12 Code Once, Run Twice: Creating Your Own Functions | R Without Statistics</title>
<meta name="author" content="David Keyes">
<meta name="description" content="Bruno Rodrigues, head of the Department of Statistics and Data Strategy at the Ministry of Higher Education and Research in Luxembourg, is an avid R user. The same, however, cannot be said for all...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Chapter 12 Code Once, Run Twice: Creating Your Own Functions | R Without Statistics">
<meta property="og:type" content="book">
<meta property="og:url" content="https://book.rwithoutstatistics.com/functions-chapter.html">
<meta property="og:image" content="https://book.rwithoutstatistics.com/mock-cover.png">
<meta property="og:description" content="Bruno Rodrigues, head of the Department of Statistics and Data Strategy at the Ministry of Higher Education and Research in Luxembourg, is an avid R user. The same, however, cannot be said for all...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Chapter 12 Code Once, Run Twice: Creating Your Own Functions | R Without Statistics">
<meta name="twitter:description" content="Bruno Rodrigues, head of the Department of Statistics and Data Strategy at the Ministry of Higher Education and Research in Luxembourg, is an avid R user. The same, however, cannot be said for all...">
<meta name="twitter:image" content="https://book.rwithoutstatistics.com/mock-cover.png">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="style.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">R Without Statistics</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">About the Book</a></li>
<li class="book-part">Introduction</li>
<li><a class="" href="why-r-without-statistics.html"><span class="header-section-number">1</span> Why R Without Statistics?</a></li>
<li class="book-part">Illuminate</li>
<li><a class="" href="data-viz-chapter.html"><span class="header-section-number">2</span> Principles of Data Visualization</a></li>
<li><a class="" href="custom-theme-chapter.html"><span class="header-section-number">3</span> Making Your Own Theme</a></li>
<li><a class="" href="maps-chapter.html"><span class="header-section-number">4</span> Creating Maps</a></li>
<li><a class="" href="tables-chapter.html"><span class="header-section-number">5</span> Making High-Quality Tables</a></li>
<li class="book-part">Communicate</li>
<li><a class="" href="rmarkdown-chapter.html"><span class="header-section-number">6</span> Communicating with R Markdown</a></li>
<li><a class="" href="parameterized-reports-chapter.html"><span class="header-section-number">7</span> Generate Multiple Reports at Once with Parameterized Reporting</a></li>
<li><a class="" href="presentations-chapter.html"><span class="header-section-number">8</span> Create Beautiful Presentations with R Markdown</a></li>
<li><a class="" href="websites-chapter.html"><span class="header-section-number">9</span> Make Websites to Share Results Online</a></li>
<li class="book-part">Automate</li>
<li><a class="" href="googlesheets-chapter.html"><span class="header-section-number">10</span> Automatically Access the Latest Data</a></li>
<li><a class="" href="tidycensus-chapter.html"><span class="header-section-number">11</span> Access Census Data with the tidycensus Package</a></li>
<li><a class="active" href="functions-chapter.html"><span class="header-section-number">12</span> Code Once, Run Twice: Creating Your Own Functions</a></li>
<li><a class="" href="custom-packages.html"><span class="header-section-number">13</span> Bundle Your Functions Together in Your Own R Package</a></li>
<li class="book-part">Conclusion</li>
<li><a class="" href="come-for-the-data-stay-for-the-community.html"><span class="header-section-number">14</span> Come for the Data, Stay for the Community</a></li>
</ul>

        <div class="book-extra">
          <p><a id="book-repo" href="https://github.com/rfortherestofus/r-without-statistics">View book source <i class="fab fa-github"></i></a></p>
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="functions-chapter" class="section level1" number="12">
<h1>
<span class="header-section-number">12</span> Code Once, Run Twice: Creating Your Own Functions<a class="anchor" aria-label="anchor" href="#functions-chapter"><i class="fas fa-link"></i></a>
</h1>
<p>Bruno Rodrigues, head of the Department of Statistics and Data Strategy at the Ministry of Higher Education and Research in Luxembourg, is an avid R user. The same, however, cannot be said for all of his teammates. So Rodrigues needed a way to be able to easily share data with his non-R-user colleagues. Being the avid R user that he is, he wrote some R code to help him with this task. Specifically, he wrote a function called <code>show_in_excel()</code> that would take data from R, save it as a CSV file, and open the CSV file in Excel (we’ll explore it in depth below). From then on, whenever he needed to have his data in a CSV to share with colleagues, he could run his function and share away.</p>
<p>Rodrigues made this function to avoid having to copy the code from one project to the next. Of course, he could have just copied it over each time he started a new project, but that wouldn’t be an efficient strategy. Hadley Wickham, developer of the <code>tidyverse</code> set of packages, recommends creating a function once you’ve copied code three times. Working in this way, if Rodrigues ever wanted to tweak his function, he’d only have to make changes in one place. Creating functions makes it much easier to maintain and improve your code over time.</p>
<p>In this chapter, we’ll talk about how to make your own R functions. You’ll learn how functions work by seeing Bruno Rodrigues’s <code>show_in_excel()</code> function as well as two functions that I’ve created. By the end of the chapter, you’ll be ready to start making your own functions.</p>
<div id="how-functions-work" class="section level2 unnumbered">
<h2>How Functions Work<a class="anchor" aria-label="anchor" href="#how-functions-work"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s go back to the <code>show_in_excel()</code> function that Bruno Rodrigues created (I’ll be using a slightly simplified version of it throughout the chapter). We begin by loading the <code>tidyverse</code> and <code>fs</code> packages. We’ll use the <code>tidyverse</code>, which you’ve seen throughout this book, to create a file name and save our CSV. The <code>fs</code> package will enable us to open the CSV file in Excel (or whichever program your computer uses to open CSV files by default).</p>
<div class="sourceCode" id="cb176"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://fs.r-lib.org">fs</a></span><span class="op">)</span></span></code></pre></div>
<p>Functions have three pieces:</p>
<ol style="list-style-type: decimal">
<li>Name</li>
<li>Body</li>
<li>Arguments</li>
</ol>
<p>Before we look at the <code>show_in_excel()</code> function, let’s look at a slightly altered version to help us understand how functions work. This function, called <code>show_in_excel_penguins()</code> opens the data on penguins that we saw in <a href="rmarkdown-chapter.html#rmarkdown-chapter">6</a> in Excel. We begin by importing the data with the <code><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv()</a></code> function before creating the <code>show_in_excel_penguins()</code> function.</p>
<div class="sourceCode" id="cb177"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://data.rwithoutstatistics.com/penguins-2007.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">show_in_excel_penguins</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">csv_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{tempfile()}.csv"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">penguins</span>,</span>
<span>            file <span class="op">=</span> <span class="va">csv_file</span>,</span>
<span>            na <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://fs.r-lib.org/reference/file_show.html">file_show</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">csv_file</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>To understand how our function works, let’s look at the first line. In this line, we begin by naming our function <code>show_in_excel_penguins</code>. We next use the assignment operator (<code>&lt;-</code>) and <code>function()</code> to specify that <code>show_in_excel_penguins</code> is not a variable name, but a function name. There’s an open curly bracket (<code>{</code>) at the end of the line, which indicates the start of the function body.</p>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="functions-chapter.html#cb178-1" aria-hidden="true" tabindex="-1"></a>show_in_excel_penguins <span class="ot">&lt;-</span> <span class="cf">function</span>() {</span></code></pre></div>
<p>The meat of the function can be found in its body. This is all of the code in between the open and closed curly brackets.</p>
<div class="sourceCode" id="cb179"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_in_excel_penguins</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># Function body goes here</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>In the case of the <code>show_in_excel_penguins()</code> function we’ve created, the body does three things:</p>
<ol style="list-style-type: decimal">
<li><p>Creates a location for a CSV file to be saved using the <code><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue()</a></code> function combined with the <code><a href="https://rdrr.io/r/base/tempfile.html">tempfile()</a></code> function. This creates a file a temporary location with the .csv extension and saves it as <code>csv_file</code>.</p></li>
<li><p>Writes <code>penguins</code> (the <code>x</code> argument in <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code> refers to the data frame to be saved) to the location set in <code>csv_file</code>. We also make all NA values show up as blanks (by default, they will show up as the text “NA”).</p></li>
<li><p>Uses the <code>file_show</code> function from the <code>fs</code> package to open the CSV file in Excel.</p></li>
</ol>
<div class="sourceCode" id="cb180"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">csv_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{tempfile()}.csv"</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">penguins</span>,</span>
<span>          file <span class="op">=</span> <span class="va">csv_file</span>,</span>
<span>          na <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>  </span>
<span><span class="fu"><a href="https://fs.r-lib.org/reference/file_show.html">file_show</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">csv_file</span><span class="op">)</span></span></code></pre></div>
<p>If you wanted to use the <code>show_in_excel_penguins()</code> function, you would run the lines where you define the function. From there on out, any time you run the code <code>show_in_excel_penguins()</code>, R will open up the <code>penguins</code> data frame in Excel.</p>
<p>Now, you’re probably thinking: that doesn’t seem like the most useful function. Why would I want to keep opening up the <code>penguins</code> data frame? You wouldn’t, of course. To make your function more useful, we need to add arguments. Below is the actual code that Bruno Rodrigues used (again, modified ever so slightly for simplicity). Everything looks the same as our <code>show_in_excel_penguins()</code> function with one exception: the first line now says <code>function(data)</code>. Items listed within the parentheses of our function definition are arguments. If you look further down, you’ll see one other change. Within <code><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv()</a></code>, instead of <code>x = penguins</code>, we now have <code>x = data</code>. This allows us to use the function with any data, not just <code>penguins</code>.</p>
<div class="sourceCode" id="cb181"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">show_in_excel</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">data</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">csv_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://stringr.tidyverse.org/reference/str_glue.html">str_glue</a></span><span class="op">(</span><span class="st">"{tempfile()}.csv"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://readr.tidyverse.org/reference/write_delim.html">write_csv</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">data</span>,</span>
<span>            file <span class="op">=</span> <span class="va">csv_file</span>,</span>
<span>            na <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://fs.r-lib.org/reference/file_show.html">file_show</a></span><span class="op">(</span>path <span class="op">=</span> <span class="va">csv_file</span><span class="op">)</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>To use this function, you tell <code>show_in_excel()</code> what data to use and the function will open it in Excel. You can tell it to open the <code>penguins</code> data frame as follows:</p>
<div class="sourceCode" id="cb182"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">show_in_excel</span><span class="op">(</span>data <span class="op">=</span> <span class="va">penguins</span><span class="op">)</span></span></code></pre></div>
<p>But, having created the function with the <code>data</code> argument, we can run it with any data we want to. This code, for example, will import COVID case data we saw in Chapter <a href="websites-chapter.html#websites-chapter">9</a> and open it in Excel.</p>
<div class="sourceCode" id="cb183"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://data.rwithoutstatistics.com/us-states-covid-rolling-average.csv"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">show_in_excel</span><span class="op">(</span>data <span class="op">=</span> <span class="va">covid_data</span><span class="op">)</span></span></code></pre></div>
<p>You can also use this function in a pipeline. This code filters the <code>covid_data</code> data frame to only include data from California before opening it in Excel.</p>
<div class="sourceCode" id="cb184"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">covid_data</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html">filter</a></span><span class="op">(</span><span class="va">state</span> <span class="op">==</span> <span class="st">"California"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu">show_in_excel</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Bruno Rodrigues could have copied the code within the <code>show_in_excel()</code> function and re-run it every time he wanted to view his data in Excel. But, by creating a function, he creates the code once and can run it as many times as necessary.</p>
</div>
<div id="creating-a-ggplot-theme-function" class="section level2 unnumbered">
<h2>Creating a ggplot Theme Function<a class="anchor" aria-label="anchor" href="#creating-a-ggplot-theme-function"><i class="fas fa-link"></i></a>
</h2>
<p>In the <code>show_in_excel()</code> function, nothing is changed within R; it simply allows us to view data in Excel. A more typical use case is to create a function that you use while working in R to do something to your data or, in the case below, plots. A common example is creating your own ggplot theme.</p>
<p>We’ve seen ggplot themes in Chapters <a href="data-viz-chapter.html#data-viz-chapter">2</a> and <a href="maps-chapter.html#maps-chapter">4</a>, but these uses were one-offs. Chapter <a href="custom-theme-chapter.html#custom-theme-chapter">3</a> showed how the BBC made a custom theme to be used across projects. This multi-project use case shows the value of creating a function. Rather than copying your ggplot theme code from one project to the next, you can create it once and use it across all projects.</p>
<p>Below, we can see a custom theme that I’ve created for myself. Called <code>theme_dk()</code>, this function sets the defaults that I like to use in my plots, including removing axis ticks, adjusting the font size of axis titles as well as the plot title and subtitle, and putting the legend above the plot and increasing its font size.</p>
<div class="sourceCode" id="cb185"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">theme_dk</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">show_grid_lines</span> <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>                     <span class="va">show_axis_titles</span> <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="va">custom_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>          axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                                   color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>          axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                                   color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>          plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>          plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                                    face <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>                                    margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>          plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>                                       color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>          legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>          legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">show_grid_lines</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="va">custom_theme</span> <span class="op">&lt;-</span> <span class="va">custom_theme</span> <span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">show_axis_titles</span> <span class="op">==</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span>
<span>    </span>
<span>    <span class="va">custom_theme</span> <span class="op">&lt;-</span> <span class="va">custom_theme</span> <span class="op">+</span></span>
<span>      <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>            axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span>    </span>
<span>  <span class="op">}</span></span>
<span>  </span>
<span>  <span class="va">custom_theme</span></span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>I can then apply my theme as you would any other ggplot theme.</p>
<div class="sourceCode" id="cb186"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">bill_length_mm</span>,</span>
<span>             y <span class="op">=</span> <span class="va">bill_depth_mm</span>,</span>
<span>             color <span class="op">=</span> <span class="va">island</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"A histogram of bill length and bill depth"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Data from palmerpenguins package"</span>,</span>
<span>       x <span class="op">=</span> <span class="st">"Bill Length"</span>,</span>
<span>       y <span class="op">=</span> <span class="st">"Bill Depth"</span>,</span>
<span>       color <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dk</span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>In Figure <a href="functions-chapter.html#fig:theme-dk-histogram">12.1</a> below, we can see what a histogram made with <code>theme_dk()</code> looks like using the same <code>penguins</code> data.</p>
<div class="figure">
<span style="display:block;" id="fig:theme-dk-histogram"></span>
<img src="functions_files/figure-html/theme-dk-histogram-1.png" alt="A histogram made with my custom theme" width="100%"><p class="caption">
Figure 12.1: A histogram made with my custom theme
</p>
</div>
<p>Let’s now discuss how the custom ggplot theme function works. The first three lines define our function and provide two arguments: <code>show_grid_lines</code> and <code>show_axis_titles</code>. Whereas the <code>data</code> argument in <code>show_in_excel()</code> required us to give the function data, the arguments in <code>theme_dk()</code> have defaults built in. The lines <code>show_grid_lines = TRUE</code> and <code>show_axis_lines = TRUE</code> mean that grid lines and axis titles will be visible on our plot by default.</p>
<p>The first piece of the code in <code>theme_dk()</code> starts with <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal()</a></code> (for more on the specifics refer to how the <code><a href="https://rdrr.io/pkg/bbplot/man/bbc_style.html">bbc_style()</a></code> function was created in Chapter <a href="custom-theme-chapter.html#custom-theme-chapter">3</a>). The changes that are then made with the <code><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme()</a></code> function are saved as an object called <code>custom_theme</code>.</p>
<div class="sourceCode" id="cb187"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">custom_theme</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>panel.grid.minor <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.ticks <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>        axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                                  color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>        axis.title.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>t <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        axis.title.y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>r <span class="op">=</span> <span class="fl">10</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                                 color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>        plot.title.position <span class="op">=</span> <span class="st">"plot"</span>,</span>
<span>        plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">20</span>,</span>
<span>                                  face <span class="op">=</span> <span class="st">"bold"</span>,</span>
<span>                                  margin <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">margin</a></span><span class="op">(</span>b <span class="op">=</span> <span class="fl">8</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        plot.subtitle <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span>,</span>
<span>                                     color <span class="op">=</span> <span class="st">"grey50"</span><span class="op">)</span>,</span>
<span>        legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>        legend.position <span class="op">=</span> <span class="st">"top"</span><span class="op">)</span></span></code></pre></div>
<p>One difference between <code>theme_dk()</code> and <code><a href="https://rdrr.io/pkg/bbplot/man/bbc_style.html">bbc_style()</a></code> is that <code>theme_dk()</code> gives a bit more flexibility. I do this using two <code>if</code> statements. While I defined the default plot to show grid lines and axis titles, if the user sets the <code>show_grid_lines</code> and <code>show_axis_titles</code> arguments to FALSE, those elements will be removed. The <code>if</code> statements test whether <code>show_grid_lines</code> and <code>show_axis_titles</code> are set to TRUE. If so, it changes the <code>custom_theme</code> object. At the end of the function, we do what’s called returning an object. In this case, we return the <code>custom_theme</code> object, meaning that <code>custom_theme</code>, with or without our changes to grid lines and axis titles is returned, making it available to use in our plot.</p>
<p>To show an example of when we might want to remove grid lines and axis titles, I’ll create a simple bar chart of the number of penguins on each island.</p>
<div class="sourceCode" id="cb188"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">penguins</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/count.html">count</a></span><span class="op">(</span><span class="va">island</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">island</span>,</span>
<span>             y <span class="op">=</span> <span class="va">n</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>title <span class="op">=</span> <span class="st">"Number of penguins on each island"</span>,</span>
<span>       subtitle <span class="op">=</span> <span class="st">"Data from palmerpenguins package"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_dk</span><span class="op">(</span>show_grid_lines <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>           show_axis_titles <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div>
<p>When I use <code>theme_dk()</code> here, I set <code>show_grid_lines</code> and <code>show_axis_titles</code> to FALSE, removing those elements from our chart. We can see the result in Figure <a href="functions-chapter.html#fig:theme-dk-bar-chart">12.2</a>.</p>
<div class="figure">
<span style="display:block;" id="fig:theme-dk-bar-chart"></span>
<img src="functions_files/figure-html/theme-dk-bar-chart-1.png" alt="A bar chart using my custom theme" width="100%"><p class="caption">
Figure 12.2: A bar chart using my custom theme
</p>
</div>
<p>Creating a function with default arguments allows us to set the options that we are most likely to want, while also giving us flexibility to change the arguments each time we use the function.</p>
</div>
<div id="creating-a-function-to-automatically-format-race-and-ethnicity-data" class="section level2 unnumbered">
<h2>Creating a Function to Automatically Format Race and Ethnicity Data<a class="anchor" aria-label="anchor" href="#creating-a-function-to-automatically-format-race-and-ethnicity-data"><i class="fas fa-link"></i></a>
</h2>
<p>Let’s take a look at one more custom function that I’ve created. As we saw in Chapter <a href="tidycensus-chapter.html#tidycensus-chapter">11</a>, we can use the <code>tidycensus</code> package to easily pull in data directly from the United States Census Bureau. As we also saw in that same chapter, it can be hard to remember the names of variables. I regularly want to access data on population by race and ethnicity from the American Community Survey, but I never remember which variables I need to access to do so. I’ve created the <code>get_acs_race_ethnicity()</code> function below to help me.</p>
<div class="sourceCode" id="cb189"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://walker-data.com/tidycensus/">tidycensus</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">get_acs_race_ethnicity</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs</a></span><span class="op">(</span><span class="va">...</span>,</span>
<span>          variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"White"</span> <span class="op">=</span> <span class="st">"B03002_003"</span>,</span>
<span>                        <span class="st">"Black/African American"</span> <span class="op">=</span> <span class="st">"B03002_004"</span>,</span>
<span>                        <span class="st">"American Indian/Alaska Native"</span> <span class="op">=</span> <span class="st">"B03002_005"</span>,</span>
<span>                        <span class="st">"Asian"</span> <span class="op">=</span> <span class="st">"B03002_006"</span>,</span>
<span>                        <span class="st">"Native Hawaiian/Pacific Islander"</span> <span class="op">=</span> <span class="st">"B03002_007"</span>,</span>
<span>                        <span class="st">"Other race"</span> <span class="op">=</span> <span class="st">"B03002_008"</span>,</span>
<span>                        <span class="st">"Multi-Race"</span> <span class="op">=</span> <span class="st">"B03002_009"</span>,</span>
<span>                        <span class="st">"Hispanic/Latino"</span> <span class="op">=</span> <span class="st">"B03002_012"</span><span class="op">)</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>Much of the code in this function will look familiar: it uses the <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs()</a></code> function to bring in data. And it gives names to the variables (for example, “Asian” instead of “B03002_006”). But the novel piece is the <code>...</code> (pronounced “dot-dot-dot”) used within <code>function()</code> and within <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs()</a></code>. To explain what this is, let’s talk about why it exists. I created the <code>get_acs_race_ethnicity()</code> function to do two things:</p>
<ol style="list-style-type: decimal">
<li><p>Bring in data on population by race and ethnicity.</p></li>
<li><p>Give my variables more meaningful names.</p></li>
</ol>
<p>What <code>get_acs_race_ethnicity()</code> does not do is determine the geography needed. Do I want this data at the state level, say, the county level, or the Census tract level? I could add an argument for this, but I’d just be recreating arguments that already exist in the <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs()</a></code> function. See below for what this would look like.</p>
<div class="sourceCode" id="cb190"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">get_acs_race_ethnicity</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">my_geography</span><span class="op">)</span> <span class="op">{</span></span>
<span>  </span>
<span>  <span class="fu"><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs</a></span><span class="op">(</span>geography <span class="op">=</span> <span class="va">my_geography</span>,</span>
<span>          variables <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"White"</span> <span class="op">=</span> <span class="st">"B03002_003"</span>,</span>
<span>                        <span class="st">"Black/African American"</span> <span class="op">=</span> <span class="st">"B03002_004"</span>,</span>
<span>                        <span class="st">"American Indian/Alaska Native"</span> <span class="op">=</span> <span class="st">"B03002_005"</span>,</span>
<span>                        <span class="st">"Asian"</span> <span class="op">=</span> <span class="st">"B03002_006"</span>,</span>
<span>                        <span class="st">"Native Hawaiian/Pacific Islander"</span> <span class="op">=</span> <span class="st">"B03002_007"</span>,</span>
<span>                        <span class="st">"Other race"</span> <span class="op">=</span> <span class="st">"B03002_008"</span>,</span>
<span>                        <span class="st">"Multi-Race"</span> <span class="op">=</span> <span class="st">"B03002_009"</span>,</span>
<span>                        <span class="st">"Hispanic/Latino"</span> <span class="op">=</span> <span class="st">"B03002_012"</span><span class="op">)</span><span class="op">)</span> </span>
<span>  </span>
<span><span class="op">}</span></span></code></pre></div>
<p>As we saw in Chapter <a href="tidycensus-chapter.html#tidycensus-chapter">11</a>, the <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs()</a></code> function has many arguments. I don’t want to repeat them all as arguments in my <code>get_acs_race_ethnicity()</code> function. The <code>...</code> allows us to avoid doing so. By putting <code>...</code> in the <code>get_acs_race_ethnicity()</code> function, any arguments listed there are then passed to the <code><a href="https://walker-data.com/tidycensus/reference/get_acs.html">get_acs()</a></code> function (note the <code>...</code> there as well). I can then run this code to set the <code>geography</code> to state.</p>
<div class="sourceCode" id="cb191"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">get_acs_race_ethnicity</span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"state"</span><span class="op">)</span></span></code></pre></div>
<p>Which would return the following:</p>
<pre><code>#&gt; # A tibble: 416 × 5
#&gt;    GEOID NAME    variable                      estim…¹   moe
#&gt;    &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;                           &lt;dbl&gt; &lt;dbl&gt;
#&gt;  1 01    Alabama White                         3192147  1410
#&gt;  2 01    Alabama Black/African American        1292950  2796
#&gt;  3 01    Alabama American Indian/Alaska Native   21297  1050
#&gt;  4 01    Alabama Asian                           67317  1384
#&gt;  5 01    Alabama Native Hawaiian/Pacific Isla…    1887   317
#&gt;  6 01    Alabama Other race                       9779  1312
#&gt;  7 01    Alabama Multi-Race                      94858  3378
#&gt;  8 01    Alabama Hispanic/Latino                212951   536
#&gt;  9 02    Alaska  White                          439979   831
#&gt; 10 02    Alaska  Black/African American          22720   999
#&gt; # … with 406 more rows, and abbreviated variable name
#&gt; #   ¹​estimate</code></pre>
<p>I could run my <code>get_acs_race_ethnicity()</code> function again and add <code>geometry = TRUE</code> as follows.</p>
<div class="sourceCode" id="cb193"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">get_acs_race_ethnicity</span><span class="op">(</span>geography <span class="op">=</span> <span class="st">"state"</span>,</span>
<span>                       geometry <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<p>My <code>get_acs_race_ethnicity()</code> function will now return geospatial data alongside my demographic data.</p>
<pre><code>#&gt; Simple feature collection with 416 features and 5 fields
#&gt; Geometry type: MULTIPOLYGON
#&gt; Dimension:     XY
#&gt; Bounding box:  xmin: -179.1489 ymin: 17.88328 xmax: 179.7785 ymax: 71.36516
#&gt; Geodetic CRS:  NAD83
#&gt; First 10 features:
#&gt;    GEOID        NAME                         variable
#&gt; 1     35  New Mexico                            White
#&gt; 2     35  New Mexico           Black/African American
#&gt; 3     35  New Mexico    American Indian/Alaska Native
#&gt; 4     35  New Mexico                            Asian
#&gt; 5     35  New Mexico Native Hawaiian/Pacific Islander
#&gt; 6     35  New Mexico                       Other race
#&gt; 7     35  New Mexico                       Multi-Race
#&gt; 8     35  New Mexico                  Hispanic/Latino
#&gt; 9     72 Puerto Rico                            White
#&gt; 10    72 Puerto Rico           Black/African American
#&gt;    estimate  moe                       geometry
#&gt; 1    769139 1774 MULTIPOLYGON (((-109.0502 3...
#&gt; 2     37975 1007 MULTIPOLYGON (((-109.0502 3...
#&gt; 3    179881 1583 MULTIPOLYGON (((-109.0502 3...
#&gt; 4     31328  853 MULTIPOLYGON (((-109.0502 3...
#&gt; 5      1408  312 MULTIPOLYGON (((-109.0502 3...
#&gt; 6      5934  977 MULTIPOLYGON (((-109.0502 3...
#&gt; 7     39568 2313 MULTIPOLYGON (((-109.0502 3...
#&gt; 8   1031788   NA MULTIPOLYGON (((-109.0502 3...
#&gt; 9     31715 1746 MULTIPOLYGON (((-65.23805 1...
#&gt; 10     3214  494 MULTIPOLYGON (((-65.23805 1...</code></pre>
<p>The <code>...</code> allows me to create my own function and pass any arguments from it to another function without repeating all of the child function’s arguments, giving me flexibility while maintaining brevity.</p>
</div>
<div id="conclusion-3" class="section level2 unnumbered">
<h2>Conclusion<a class="anchor" aria-label="anchor" href="#conclusion-3"><i class="fas fa-link"></i></a>
</h2>
<p>In this chapter, we’ve seen how you can create your own functions to avoid having to copy and paste code over and over. Creating a function allowed Bruno Rodrigues to be able to easily open data in Excel. And I myself have written code that gives me me a custom ggplot theme and a function to easily import race and ethnicity data from the American Community Survey. All of these functions are things that Bruno or I might have otherwise copied across multiple projects. Creating a function lets us create them once and use them across projects.</p>
<p>When I started working in R, I saw functions as code that other people created that made my life easier. With time, I came to realize that there is nothing special about functions created by others. Because R is an open source language, anyone can create functions to do things they need to do, including me. Sometimes those things are small (like my function to access race and ethnicity data from the ACS). Other times, they’re larger (like my custom ggplot theme). No matter how big they are, functions that you create can have a huge improvement on your coding efficiency.</p>

</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="tidycensus-chapter.html"><span class="header-section-number">11</span> Access Census Data with the tidycensus Package</a></div>
<div class="next"><a href="custom-packages.html"><span class="header-section-number">13</span> Bundle Your Functions Together in Your Own R Package</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#functions-chapter"><span class="header-section-number">12</span> Code Once, Run Twice: Creating Your Own Functions</a></li>
<li><a class="nav-link" href="#how-functions-work">How Functions Work</a></li>
<li><a class="nav-link" href="#creating-a-ggplot-theme-function">Creating a ggplot Theme Function</a></li>
<li><a class="nav-link" href="#creating-a-function-to-automatically-format-race-and-ethnicity-data">Creating a Function to Automatically Format Race and Ethnicity Data</a></li>
<li><a class="nav-link" href="#conclusion-3">Conclusion</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
<li><a id="book-source" href="https://github.com/rfortherestofus/r-without-statistics/blob/master/functions.Rmd">View source <i class="fab fa-github"></i></a></li>
          <li><a id="book-edit" href="https://github.com/rfortherestofus/r-without-statistics/edit/master/functions.Rmd">Edit this page <i class="fab fa-github"></i></a></li>
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>R Without Statistics</strong>" was written by David Keyes. </p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer>
</body>
</html>
