# Create Beautiful Presentations with R Markdown 

Remember how we talked in Chapter \@ref(rmarkdown-chapter) about the multi-tool workflow from SPSS to Excel to Word? That leaves out one of the most common tools in many people's workflow: PowerPoint. Reporting happens in presentations as often as it does in Word-based reports. 

In Chapter \@ref(rmarkdown-chapter), we talked about the R Markdown-based workflow having the benefit of keeping everything in one tool. You may be wondering at this point if creating presentations will require us to add another tool, like PowerPoint. Do you need to do your analysis, data visualization, and table making in R and then copy everything to PowerPoint by hand? No! The good news is that R has robust presentation-making capabilities. 

In this chapter, we'll learn how to make presentations in R using the `xaringan` package. This package, which uses R Markdown to make presentations, is one of several you can use to make slides, but it is the most widely used. To learn more about the capabilities of `xaringan` I spoke with Silvia Canelón, a data analyst in the Urban Health Lab at the University of Pennsylvania. Canelón has done extensive teaching on the `xaringan` package and thought deeply about its benefits. As you'll hear in this chapter, these benefits go beyond making nice-looking slides. 

## How `xaringan` Works {-} 

To get started with `xaringan`, you need to first install the package using the standard approach: `install.packages("xaringan")`. Once it is installed, you can now go to File > New File > R Markdown. When you do this, you'll be presented with the screen seen in Figure \@ref(fig:TODO). 

TODO: Add screenshot https://show.rfor.us/GbnwfWK2

You're probably thinking that you want to go to the Presentation tab. Doing so will give you several options for making slides, as you can see in Figure \@ref(fig:TODO).

TODO: Add screenshot

These are other formats you can use to make slides (and yes, you can knit an R Markdown document to PowerPoint). However, if you want to make a presentation with `xaringan` (and, as I will explain below, I think it's the best option), you should go to the From Template tab. From there, scroll down until you find the template called Ninja Presentation. Select that, hit OK, and you'll get a blank R Markdown document. Just as when we created a regular R Markdown document, creating a new `xaringan` presentation will give us some default content. I'm going to delete that and add my own contents which you can see below.

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
---
title: "Penguins Report"
author: "David Keyes"
date: "2024-01-12"
output: xaringan::moon_reader
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(include = TRUE, 
                      echo = FALSE,
                      message = FALSE,
                      warning = FALSE)
```

```{r}
library(tidyverse)
```

```{r}
penguins <- read_csv("https://raw.githubusercontent.com/rfortherestofus/r-without-statistics/main/data/penguins-2008.csv")
```

# Introduction

We are writing a report about the **Palmer Penguins**. These penguins are *really* amazing. There are three species:

- Adelie
- Gentoo
- Chinstrap

## Bill Length

We can make a histogram to see the distribution of bill lengths.

```{r}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```


```{r}
average_bill_length <- penguins %>% 
  summarize(avg_bill_length = mean(bill_length_mm,
                                   na.rm = TRUE)) %>% 
  pull(avg_bill_length)
```

The chart shows the distribution of bill lengths. The average bill length is `r average_bill_length` millimeters.
````

This code should look familiar because it is exactly the same as the R Markdown document we created in Chapter \@ref(rmarkdown-chapter) with one line changed in the YAML. Instead of  `output: word_document` we now have `output: xaringan::moon_reader`. With this change, we will now get slides rather than a Word document. Let's try hitting the Knit button to see what it looks like. When I hit Knit, I get an HTML file with the same name as R Markdown document (in my case, `xaringan-example.Rmd` and `xaringan-example.html`). This is the first thing to know about `xaringan`: the slides it produces are HTML files. It may seem odd to get slides as HTML files, but it's got several advantages over formats like PowerPoint, as we'll see below. If I open up the HTML document, I see Figure \@ref(fig:TODO).

TODO: Add screenshot

If we scroll to the next slide with the right arrow key, we'll see content that looks familiar. Figure \@ref(fig:TODO) shows this slide, which has the same text and a cut-off version of the histogram we made in Chapter \@ref(rmarkdown-chapter).

TODO: Add screenshot

This slide shows us two things:

1. **The overall syntax for making slides with `xaringan` is nearly identical to that used to make reports with R Markdown.** We copied in the content of our R Markdown document, changed one line, and we see the same output, just in slide format. The YAML, markdown text, and code chunks work exactly the same. 
2. **We need to make a few tweaks to make our content fit on our slides.** When we're working in an R Markdown document that will be knitted to Word, its length doesn't matter because reports can be one page or 100 pages. Working with `xaringan`, however, we need to be conscientious about how much content will fit on one slide. Our cut-off histogram shows us what happens without doing this. Let's fix it.

### Breaking Content Across Slides {-}

Let's make our histogram fully visible by putting it on its own slide. To make a new slide, we add three dashes at any point in our R Markdown document. I've copied the relevant portion of the document and added these dashes. 

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}

---

## Bill Length

We can make a histogram to see the distribution of bill lengths.

```{r}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```
````

If I knit again, what was one slide is now broke into two: an Introduction slide and a Bill Length slide. We can see both in Figure \@ref(fig:TODO).

TODO: Add screenshot

If I look closely, I can see that the bottom of histogram is ever so slightly cut off. I can fix this by adjusting its size. We do this using the code chunk option `fig.height` as follows:

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}

---

## Bill Length

We can make a histogram to see the distribution of bill lengths.

```{r fig.height = 4}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```
````

Doing this makes the histogram fit on the slide and also reveals the text that was hidden below. 

### Incrementally Revealing Content {-}

When presenting, it's often useful to only show a portion of the content on each slide at a time (TODO: awk language). Let's say, for example, we know that when we're presenting the first slide, we want to talk a bit about each penguin species. Rather than have all three visible when we open this slide, it would be nice to have the names come up one at a time. We can do this using what `xaringan` calls incremental reveal. 

To use this feature, we put two dashes between any content we want to incrementally reveal. This code, for example, will let us show Adelie on the screen, then Adelie and Gentoo, then Adelie, Gentoo, and Chinstrap.

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
# Introduction

We are writing a report about the **Palmer Penguins**. These penguins are *really* amazing. There are three species:

- Adelie

--

- Gentoo

--

- Chinstrap

````

When presenting your slides, you'll use the right arrow to incrementally reveal the species. We can see what this looks like in Figure \@ref(fig:TODO).

TODO: Add all three slides

### Aligning Content {-}

When designing your presentation, you'll likely want to control the alignment of content. We do this by adding what are known as content classes. You can surround any content with the classes `.left[]`, `right[]`, and `center[]` to align them. For example, on our slide that creates a histogram and associated text, we could put `.center[]` around the code chunk that makes the histogram:

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
## Bill Length

We can make a histogram to see the distribution of bill lengths.

.center[
```{r fig.height = 4}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```
]

```{r}
average_bill_length <- penguins %>% 
  summarize(avg_bill_length = mean(bill_length_mm,
                                   na.rm = TRUE)) %>% 
  pull(avg_bill_length)
```

The chart shows the distribution of bill lengths. The average bill length is `r average_bill_length` millimeters.
````

Doing this would center the chart on our slide, as we can see in Figure \@ref(fig:TODO).

TODO: https://show.rfor.us/WVStZhvT

There are also built-in options to make two-column layouts. Adding `pull-left[]` and `pull-right[]` in this way will make two equally spaced columns.

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
## Bill Length

We can make a histogram to see the distribution of bill lengths.

.pull-left[
```{r fig.height = 4}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```
]

.pull-right[
```{r}
average_bill_length <- penguins %>% 
  summarize(avg_bill_length = mean(bill_length_mm,
                                   na.rm = TRUE)) %>% 
  pull(avg_bill_length)
```

The chart shows the distribution of bill lengths. The average bill length is `r average_bill_length` millimeters.
]
````

We can see what this looks like in Figure \@ref(fig:TODO) below.

https://show.rfor.us/vRl3dFxy

You can also use the content classes `.left-column[]` and `.right-column[]` to make a layout with a narrow left column and wide right column. The code below puts the text on the left and the histogram on the right.

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
## Bill Length

We can make a histogram to see the distribution of bill lengths.

.right-column[
```{r fig.height = 4}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```
]

.left-column[
```{r}
average_bill_length <- penguins %>% 
  summarize(avg_bill_length = mean(bill_length_mm,
                                   na.rm = TRUE)) %>% 
  pull(avg_bill_length)
```

The chart shows the distribution of bill lengths. The average bill length is `r average_bill_length` millimeters.
]
````

We can see the slide output in Figure \@ref(fig:TODO).

TODO: https://show.rfor.us/97G1w5GQ

In addition to aligning particular pieces of content on slides, we can also everything using the `.left`, `right`, and `center` classes. To do this, you specify the class right after the three dashes that indicate a new slide and before any content. 

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
---

class: center

## Bill Length

We can make a histogram to see the distribution of bill lengths.

```{r fig.height = 4}
penguins %>% 
  ggplot(aes(x = bill_length_mm)) +
  geom_histogram() +
  theme_minimal()
```

```{r}
average_bill_length <- penguins %>% 
  summarize(avg_bill_length = mean(bill_length_mm,
                                   na.rm = TRUE)) %>% 
  pull(avg_bill_length)
```

The chart shows the distribution of bill lengths. The average bill length is `r average_bill_length` millimeters.
````

Doing this would give us a fully-centered slide, as seen in Figure \@ref(fig:TODO) below.

TODO: https://show.rfor.us/gVTzYbbl

You can also use the class `.middle` to vertically center the slide.

### Adding Background Images to Slides {-}

The same syntax that we just used to center our entire slide can also enable us to add a background image. Below I've created a new slide, added the classes `center` and `middle` to horizontally and vertically align the content, and added a background image, surrounding the path to the image with `url()`.

````{verbatim echo = TRUE, eval = FALSE, lang = "markdown"}
class: center, middle
background-image: url("penguins.jpg")

## Penguins
````

Doing this gives me a slide with a picture of penguins in the background with the text Penguins in front of it. Figure \@ref(fig:TODO) shows the output.

TODO: https://show.rfor.us/cmsHyylq

### Customizing our Slides {-}

One issue with the slide we just made is that it's hard to read the word "Penguins."

